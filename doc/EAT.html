<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Miguel HernÃ¡ndez University" />

<meta name="date" content="2021-01-18" />

<title>EAT: Efficiency Analysis Trees</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>
<script>// Hide empty <a> tag within highlighted CodeBlock for screen reader accessibility (see https://github.com/jgm/pandoc/issues/6352#issuecomment-626106786) -->
// v0.0.1
// Written by JooYoung Seo (jooyoung@psu.edu) and Atsushi Yasumoto on June 1st, 2020.

document.addEventListener('DOMContentLoaded', function() {
  const codeList = document.getElementsByClassName("sourceCode");
  for (var i = 0; i < codeList.length; i++) {
    var linkList = codeList[i].getElementsByTagName('a');
    for (var j = 0; j < linkList.length; j++) {
      if (linkList[j].innerHTML === "") {
        linkList[j].setAttribute('aria-hidden', 'true');
      }
    }
  }
});
</script>
<style type="text/css">
a.anchor-section {margin-left: 10px; visibility: hidden; color: inherit;}
a.anchor-section::before {content: '#';}
.hasAnchor:hover a.anchor-section {visibility: visible;}
</style>
<script>// Anchor sections v1.0 written by Atsushi Yasumoto on Oct 3rd, 2020.
document.addEventListener('DOMContentLoaded', function() {
  // Do nothing if AnchorJS is used
  if (typeof window.anchors === 'object' && anchors.hasOwnProperty('hasAnchorJSLink')) {
    return;
  }

  const h = document.querySelectorAll('h1, h2, h3, h4, h5, h6');

  // Do nothing if sections are already anchored
  if (Array.from(h).some(x => x.classList.contains('hasAnchor'))) {
    return null;
  }

  // Use section id when pandoc runs with --section-divs
  const section_id = function(x) {
    return ((x.classList.contains('section') || (x.tagName === 'SECTION'))
            ? x.id : '');
  };

  // Add anchors
  h.forEach(function(x) {
    const id = x.id || section_id(x.parentElement);
    if (id === '') {
      return null;
    }
    let anchor = document.createElement('a');
    anchor.href = '#' + id;
    anchor.classList = ['anchor-section'];
    x.classList.add('hasAnchor');
    x.appendChild(anchor);
  });
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">EAT: Efficiency Analysis Trees</h1>
<h4 class="author">Miguel HernÃ¡ndez University</h4>
<h4 class="date">2021-01-18</h4>



<style>
  body {
    text-align: justify;
    }
</style>
<p>This vignette is intended to known the main functions of the <code>EAT</code> package. <a href="https://www.sciencedirect.com/science/article/pii/S0957417420306072">Efficiency Analysis Trees</a> is an algorithm that estimates a production frontier in a data-driven environment by adapting regression trees. In this way, techniques from the field of <strong>machine learning</strong> are incorporated into solving problems in the field of <strong>production theory</strong>. From the latter, the following terminology is introduced:</p>
<ul>
<li><p>A <strong>production frontier</strong> is a boundary defined by those input and output combinations that are feasible and efficient.</p></li>
<li><p>A <strong>D</strong>ecision <strong>M</strong>aking <strong>U</strong>nit (<strong>DMU</strong>) is a observation of the dataset whose efficiency is to be assessed. A DMU is efficient when it is located at the production frontier and has room for improvement when it is located in the area underlying the border. A non-efficient DMU can become efficient through any of the following options:</p>
<ul>
<li><p>Reduce the amount of input used while keeping the same amount of output obtained.</p></li>
<li><p>Increase the amount of output obtained while keeping the same amount of input used.</p></li>
<li><p>Reduce the amount of input used and increase the amount of output obtained at the same time.</p></li>
</ul></li>
</ul>
<p>The Efficiency Analysis Trees modeling is aimed at capturing the maximum trends of a set of outputs. For this purpose, DMUs under the same resource paradigm are grouped into nodes and subsequently the maximum expected output is predicted for each node. The Efficiency Analysis Trees estimator results in a monotonic increasing frontier with a stepped form where each of these steps corresponds to a node of the tree containing homogeneus DMUs with efficient and non-efficient output levels.</p>
<p>In this section, an <strong>EAT</strong> model, an <strong>RFEAT</strong> model, a <strong>FDH</strong> model and a <strong>DEA</strong> model refer to a modeling carried out using Efficiency Analysis Trees technique, Random Forest + Efficiency Analysis Trees technique, Free Disposal Hull mathematical program model and Data Envelopment Analysis mathematical programing model respectively. The functions developed in the <code>EAT</code> library are always oriented to one of the four previous models (EAT, RFEAT, FDH or DEA) and can be divided into seven categories depending on its purpose:</p>
<p>The <code>PISAindex</code> database is included as a data object in the <code>EAT</code> library and is employed to exemplify the package functions. On the one hand, the inputs correspond to 13 variables that define the socioeconomic context of a country by means of a score in the range [1-100], except for the Gross Domestic Product by Purchasing Power Parity, which is measured in thousands of dollars. All of them have been obtained from the <a href="https://www.socialprogress.org/">Social Progress Index</a>. On the other hand, the performance of each country in the PISA exams is measured by the average score of its schools in the disciplines of Science, Reading and Mathematics and they have been collected from <a href="https://www.oecd.org/pisa/Combined_Executive_Summaries_PISA_2018.pdf">PISA 2018 Results</a>.</p>
<p>The following variables are collected for 72 countries that take the PISA exam:</p>
<ul>
<li><p><strong>Country</strong>, <strong>Continent</strong> and a 3-letter code that identifies the country following the ISO 3166 ALPHA-3 as rownames.</p></li>
<li><p><em>Outputs</em> :</p>
<ul>
<li><strong>S_PISA</strong> : mean score on the PISA exam in Science.</li>
<li><strong>R_PISA</strong> : mean score on the PISA exam in Reading.</li>
<li><strong>M_PISA</strong> : mean score on the PISA exam in Mathematics.</li>
</ul></li>
<li><p><em>Inputs</em> :</p>
<ul>
<li><p>Basic Human Needs field :</p>
<ul>
<li><strong>NBMC</strong> : Nutrition and Basic Medical Care.</li>
<li><strong>WS</strong> : Water and Sanitation.</li>
<li><strong>S</strong> : Shelter.</li>
<li><strong>PS</strong> : Personal Safety.</li>
</ul></li>
<li><p>Foundations of Wellbeing field :</p>
<ul>
<li><strong>ABK</strong> : Access to Basic Knowledge.</li>
<li><strong>AIC</strong> : Access to Information and Communications.</li>
<li><strong>HW</strong> : Health and Wellness.</li>
<li><strong>EQ</strong> : Environmental Quality.</li>
</ul></li>
<li><p>Opportunity field :</p>
<ul>
<li><strong>PR</strong> : Personal Rights.</li>
<li><strong>PFC</strong> : Personal Freedom and Choice.</li>
<li><strong>I</strong> : Inclusiveness.</li>
<li><strong>AAE</strong> : Access to Advanced Education.</li>
</ul></li>
<li><p><strong>GDP_PPP</strong> : Gross Domestic Product based on Purchasing Power Parity.</p></li>
</ul></li>
</ul>
<p>The <code>EAT</code> package is applied with the following purposes: (1) to create homogeneous groups of countries in terms of their socioeconomic characteristics (Basic Human Needs, Foundations of Wellbeing, Opportunity and GDP PPP per capita) and subsequently to know for each of these groups, what is the maximum PISA score expected in a specific discipline or in more than one; and (2) to know which countries exercise best practices and which of them do not obtain a performance according to their socioeconomic level.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># We save the seed for reproducibility of the results</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">set.seed</span>(<span class="dv">120</span>)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">library</span>(eat)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw">data</span>(<span class="st">&quot;PISAindex&quot;</span>)</span></code></pre></div>
<div id="modeling-a-scenario-with-an-input-and-an-output.-plotting-the-frontier" class="section level2">
<h2>Modeling a scenario with an input and an output. Plotting the frontier</h2>
<div id="eat" class="section level3">
<h3>EAT()</h3>
<p>The <code>EAT</code> function is the centerpiece of the <code>eat</code> library. <code>EAT</code> performs a regression tree based on CART methodology under a new approach that guarantees obtaining a frontier as estimator that fulfills the property of free disposability. This new technique has been baptized as Efficiency Analysis Trees. The development of the functions contained in the <code>EAT</code> library has been thought so that even true R novices can easily use the library. The minimum arguments of the function are the data (<code>data</code>) containing the study variables, the indexes of the predictor variables or inputs (<code>x</code>) and the indexes of the predicted variables or outputs (<code>y</code>). Additionally, the <code>numStop</code> and <code>fold</code> arguments are included for those more experienced users in the fields of machine learning and tree-based models. Modifying these two allows obtaining different frontiers and therefore selecting the one that best suits the needs of the analysis. <code>numStop</code> refers to the minimum number of observations in a node to be divided and is directly related to the size of the tree. The higher the value of <code>numStop</code> the smaller the size of the tree. On the other hand, <code>fold</code> refers to the number of parts in which the dataset is divided to apply the cross-validation technique, although, in this case, its variation is not so directly related to size of the tree. The function returns an <code>EAT</code> object.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">EAT</span>(data, x, y, </span>
<span id="cb3-2"><a href="#cb3-2"></a>    <span class="dt">fold =</span> <span class="dv">5</span>,</span>
<span id="cb3-3"><a href="#cb3-3"></a>    <span class="dt">numStop =</span> <span class="dv">5</span>, </span>
<span id="cb3-4"><a href="#cb3-4"></a>    <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<ul>
<li>Example 1: <code>M_PISA ~ PFC</code></li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>single_model &lt;-<span class="st"> </span><span class="kw">EAT</span>(<span class="dt">data =</span> PISAindex, </span>
<span id="cb4-2"><a href="#cb4-2"></a>                    <span class="dt">x =</span> <span class="dv">15</span>, <span class="co"># input </span></span>
<span id="cb4-3"><a href="#cb4-3"></a>                    <span class="dt">y =</span> <span class="dv">3</span>) <span class="co"># output</span></span></code></pre></div>
<p><code>print()</code> returns the tree structure where:</p>
<ul>
<li><code>y</code> : vector of predictions.</li>
<li><code>MSE</code> : mean square error at the node.</li>
<li><code>n(t)</code> : number of DMUs at the node.</li>
<li><code>input name &lt; / &gt;= s</code> represents the division of the space.</li>
<li><code>&lt;*&gt;</code> indicates a leaf node.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">print</span>(single_model)</span></code></pre></div>
<p><code>summary()</code> returns the following information:</p>
<ul>
<li><p><code>Formula</code> : outputs ~ inputs</p></li>
<li><p><code>Summary for leaf nodes</code> where:</p>
<ul>
<li><code>id</code> : leaf node index.</li>
<li><code>n(t)</code> : number of DMUs at the leaf node.</li>
<li><code>%</code> : proportion of DMUs at the leaf node.</li>
<li>As many columns as <code>output names</code> with the corresponding predictions for the leaf nodes.</li>
<li><code>MSE</code> : mean square error at the leaf node.</li>
</ul></li>
<li><p><code>Tree</code> where:</p>
<ul>
<li><code>Inner nodes</code> : number of inner nodes.</li>
<li><code>Leaf nodes</code> : number of leaf nodes.</li>
<li><code>Total nodes</code> : total number of nodes (inner nodes + leaf nodes).</li>
<li><code>Total MSE</code> : mean square error at the tree.</li>
<li><code>numStop</code> : numStop hyperparameter value.</li>
<li><code>fold</code> : fold hyperparameter value.</li>
</ul></li>
<li><p><code>Primary &amp; surrogate splits</code> where:</p>
<ul>
<li><code>Node A --&gt; {B, C}</code> indicates that the node A is split into the left child node B and the right child node C.</li>
<li><code>variable --&gt; {MSE: , s: }</code> represents the division of the space with its mean square error and threshold.</li>
<li><code>Surrogate splits</code> indicates the best possible split for each variable that has not been used to divide the node. This is expressed as <code>variable --&gt; {tL_R: , tR_R: , s: }</code> where <code>tL_R</code> and <code>tR_R</code> represent the error for each child node and <code>s</code> the threshold. In the case of a single input, the surrogate splits do not appear.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">summary</span>(single_model)</span></code></pre></div>
<p><code>size()</code> returns the number of leaf nodes:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">size</span>(single_model)</span></code></pre></div>
<p>Additionally, <code>EAT_object[[&quot;tree&quot;]][[id_node]]</code> or <code>EAT_object$tree[[id_node]]</code> returns a <code>list</code> that allows to know in greater detail the characteristics of a given node. The elements that define a node are the following:</p>
<ul>
<li><code>id</code> : node index.</li>
<li><code>F</code> : father node index.</li>
<li><code>SL</code> : left child node index.</li>
<li><code>SR</code> : right child node index.</li>
<li><code>index</code> : set of indexes corresponding to the observations in a node.</li>
<li><code>varInfo</code> : list containing the MSE of the left node, the MSE of the right node and the threshold of the best split for each input.</li>
<li><code>R</code> : mean square error in a node.</li>
<li><code>xi</code> : index of the variable that produces the split in a node.</li>
<li><code>s</code> : threshold of the variable <code>xi</code> by which the split takes place.</li>
<li><code>y</code> : value(s) of the predicted variable(s) in a node.</li>
<li><code>a</code> : first Pareto-dominance coordinate to ensure the property of free disposability in the frontier.</li>
<li><code>b</code> : second Pareto-dominance coordinate to ensure the property of free disposability in the frontier.</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>single_model[[<span class="st">&quot;tree&quot;</span>]][[<span class="dv">5</span>]]</span></code></pre></div>
<ul>
<li>Categorical variables</li>
</ul>
<p>The types of variables accepted by the <code>EAT</code> function are the following:</p>
<p><strong>Factor (not ordered)</strong></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># Transform Continent to Factor</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>PISAindex_factor_Continent &lt;-<span class="st"> </span>PISAindex</span>
<span id="cb9-3"><a href="#cb9-3"></a>PISAindex_factor_Continent<span class="op">$</span>Continent &lt;-<span class="st"> </span><span class="kw">as.factor</span>(PISAindex_factor_Continent<span class="op">$</span>Continent)</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>error_model &lt;-<span class="st"> </span><span class="kw">EAT</span>(<span class="dt">data =</span> PISAindex_factor_Continent, </span>
<span id="cb10-2"><a href="#cb10-2"></a>                   <span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">15</span>), <span class="co"># input</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>                   <span class="dt">y =</span> <span class="dv">3</span>) <span class="co"># output</span></span></code></pre></div>
<p><strong>Factor ordered</strong></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># Cateogirze GDP_PPP into 4 groups: Low, Medium, High, Very High.  </span></span>
<span id="cb11-2"><a href="#cb11-2"></a>PISAindex_GDP_PPP_cat &lt;-<span class="st"> </span>PISAindex</span>
<span id="cb11-3"><a href="#cb11-3"></a>PISAindex_GDP_PPP_cat<span class="op">$</span>GDP_PPP_cat &lt;-<span class="st"> </span><span class="kw">cut</span>(PISAindex_GDP_PPP_cat<span class="op">$</span>GDP_PPP,</span>
<span id="cb11-4"><a href="#cb11-4"></a>                                         <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">16.686</span>, <span class="fl">31.419</span>, <span class="fl">47.745</span>, <span class="ot">Inf</span>),</span>
<span id="cb11-5"><a href="#cb11-5"></a>                                         <span class="dt">include.lowest =</span> T,</span>
<span id="cb11-6"><a href="#cb11-6"></a>                                         <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Low&quot;</span>, <span class="st">&quot;Medium&quot;</span>, <span class="st">&quot;High&quot;</span>, <span class="st">&quot;Very high&quot;</span>))</span>
<span id="cb11-7"><a href="#cb11-7"></a></span>
<span id="cb11-8"><a href="#cb11-8"></a><span class="kw">class</span>(PISAindex_GDP_PPP_cat<span class="op">$</span>GDP_PPP_cat) <span class="co"># &quot;factor&quot; --&gt; error</span></span>
<span id="cb11-9"><a href="#cb11-9"></a></span>
<span id="cb11-10"><a href="#cb11-10"></a><span class="co"># It is necessary to indicate order = T, before the EAT function</span></span>
<span id="cb11-11"><a href="#cb11-11"></a></span>
<span id="cb11-12"><a href="#cb11-12"></a>PISAindex_GDP_PPP_cat<span class="op">$</span>GDP_PPP_cat &lt;-<span class="st"> </span><span class="kw">factor</span>(PISAindex_GDP_PPP_cat<span class="op">$</span>GDP_PPP_cat, <span class="dt">order =</span> T)</span>
<span id="cb11-13"><a href="#cb11-13"></a></span>
<span id="cb11-14"><a href="#cb11-14"></a><span class="kw">class</span>(PISAindex_GDP_PPP_cat<span class="op">$</span>GDP_PPP_cat) <span class="co"># &quot;ordered&quot; &quot;factor&quot; --&gt; correct</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>categorized_model &lt;-<span class="st"> </span><span class="kw">EAT</span>(<span class="dt">data =</span> PISAindex_GDP_PPP_cat, </span>
<span id="cb12-2"><a href="#cb12-2"></a>                         <span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">15</span>, <span class="dv">19</span>), <span class="co"># input</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>                         <span class="dt">y =</span> <span class="dv">3</span>) <span class="co"># output</span></span></code></pre></div>
</div>
<div id="frontier" class="section level3">
<h3>frontier()</h3>
<p>The <code>frontier</code> function displays the frontier estimated by the <code>EAT</code> function through a plot from <code>ggplot2</code>. The frontier estimated by FDH can be plotted too if <code>FDH = TRUE</code>. Training DMUs can be showed by a scatterplot if <code>train.data = TRUE</code> and its color, shape and size can be modified with <code>train.color</code>, <code>pch</code> and <code>size</code> respectively. Finally, rownames can be included with <code>rwn = TRUE</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">frontier</span>(object,</span>
<span id="cb13-2"><a href="#cb13-2"></a>         <span class="dt">FDH =</span> <span class="ot">FALSE</span>,</span>
<span id="cb13-3"><a href="#cb13-3"></a>         <span class="dt">train.data =</span> <span class="ot">FALSE</span>,</span>
<span id="cb13-4"><a href="#cb13-4"></a>         <span class="dt">train.color =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb13-5"><a href="#cb13-5"></a>         <span class="dt">pch =</span> <span class="dv">19</span>,</span>
<span id="cb13-6"><a href="#cb13-6"></a>         <span class="dt">rwn =</span> <span class="ot">FALSE</span>,</span>
<span id="cb13-7"><a href="#cb13-7"></a>         <span class="dt">size =</span> <span class="fl">1.5</span>)</span></code></pre></div>
<p>To continue, the frontier of the previous model is displayed. It can be seen how the frontier obtained by the <code>EAT</code> function generalizes the results of the frontier obtained through FDH, thus avoiding overfitting. The boundary estimated through Efficiency Analysis Trees generates 3 steps corresponding to the 3 leaf nodes (nodes 3, 4 and 5) obtained with the <code>EAT</code> function. For each of these steps, a level of efficiency in terms of the output is given with respect to the amount of input used (in this case level of <code>PFC</code>). In addition, we can appreciate 6 DMUs in the frontier: ALB (Albania), MDA (Moldova), SRB (Serbia), RUS (Russia), HUN (Hungary) and SGP (Singapur). Note that the first vertical plane of the frontier does not appear, but if it did, ALB would be on it. These DMUs are efficient and the rest of the DMUs below its specific step should increase the amount of output obtained or reduce the amount of input utilized until reaching the boundary to be efficient.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>frontier &lt;-<span class="st"> </span><span class="kw">frontier</span>(<span class="dt">object =</span> single_model,</span>
<span id="cb14-2"><a href="#cb14-2"></a>                     <span class="dt">FDH =</span> <span class="ot">TRUE</span>, </span>
<span id="cb14-3"><a href="#cb14-3"></a>                     <span class="dt">train.data =</span> <span class="ot">TRUE</span>,</span>
<span id="cb14-4"><a href="#cb14-4"></a>                     <span class="dt">rwn =</span> <span class="ot">TRUE</span>)</span>
<span id="cb14-5"><a href="#cb14-5"></a></span>
<span id="cb14-6"><a href="#cb14-6"></a><span class="kw">plot</span>(frontier)</span></code></pre></div>
</div>
</div>
<div id="modeling-a-multioutput-scenario.-feature-selection." class="section level2">
<h2>Modeling a multioutput scenario. Feature selection.</h2>
<ul>
<li>Example 2: <code>S_PISA + R_PISA + M_PISA ~ NBMC + WS + S + PS + ABK + AIC + HW + EO + PR + PFC + I + AAE + GDP_PPP</code></li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>multioutput_model &lt;-<span class="st"> </span><span class="kw">EAT</span>(<span class="dt">data =</span> PISAindex, </span>
<span id="cb15-2"><a href="#cb15-2"></a>                         <span class="dt">x =</span> <span class="dv">6</span><span class="op">:</span><span class="dv">18</span>, <span class="co"># input </span></span>
<span id="cb15-3"><a href="#cb15-3"></a>                         <span class="dt">y =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">5</span>) <span class="co"># output</span></span></code></pre></div>
<div id="rankingeat" class="section level3">
<h3>rankingEAT()</h3>
<p>The second example presents a multiple output scenario where 13 inputs are used to model the 3 available outputs. In these situations, a selection of the most contributing variables may be recommended in order to reduce overfitting, improve precision and reduce future training times. <code>rankingEAT()</code> allows a selection of variables by calculating a score of importance through Efficiency Analysis Trees technique. The user can specify the number of decimal units (<code>r</code>), include a barplot with the scores of importance (<code>barplot</code>) and display a horizontal line in the graph to facilitate the cut-off point between important and not relevant variables (<code>threshold</code>).</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="kw">rankingEAT</span>(object,</span>
<span id="cb16-2"><a href="#cb16-2"></a>           <span class="dt">r =</span> <span class="dv">2</span>,</span>
<span id="cb16-3"><a href="#cb16-3"></a>           <span class="dt">barplot =</span> <span class="ot">TRUE</span>,</span>
<span id="cb16-4"><a href="#cb16-4"></a>           <span class="dt">threshold =</span> <span class="dv">70</span>)</span></code></pre></div>
<p>The importance score represents how influential the variable is in the model. In this case, the cut-off point is set at 70 and therefore important variables are considered: <strong>AAE</strong> (Acess to Advance Education), <strong>WS</strong> (Water and Sanitation), <strong>NBMC</strong> (Nutrition and Basic Medical Care), <strong>HW</strong> (Health and Wellness) and <strong>S</strong> (Shelter).</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="kw">rankingEAT</span>(<span class="dt">object =</span> multioutput_model,</span>
<span id="cb17-2"><a href="#cb17-2"></a>           <span class="dt">r =</span> <span class="dv">2</span>,</span>
<span id="cb17-3"><a href="#cb17-3"></a>           <span class="dt">barplot =</span> <span class="ot">TRUE</span>,</span>
<span id="cb17-4"><a href="#cb17-4"></a>           <span class="dt">threshold =</span> <span class="dv">70</span>)</span></code></pre></div>
</div>
</div>
<div id="graphical-representation-by-a-tree-structure" class="section level2">
<h2>Graphical representation by a tree structure</h2>
<div id="ploteat" class="section level3">
<h3>plotEAT()</h3>
<p><code>frontier()</code> allows us to see the regions of the input space originated with <code>EAT()</code> in a very clear way, however, this is impossible with more than two variables (one input and one output). For multiple input and / or output scenarios, it is provided the typical tree-structure in which the relations between the predicted variable(s) and the predictive variable(s) are showed.</p>
<p>In each node, we can obtain the following information:</p>
<ul>
<li><code>id</code>: node index.</li>
<li><code>MSE</code>: mean square error in a node.</li>
<li><code>n(t)</code>: number of DMUs in a node.</li>
<li><code>input name</code> by which the split take place.</li>
<li><code>y</code> : vector of predictions.</li>
</ul>
<p>Furthermore, the nodes are colored according to the variable by which the division is performed or they are black in the case of being a leaf node.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="kw">plotEAT</span>(object)</span></code></pre></div>
<ul>
<li>Example 3: <code>S_PISA + R_PISA + M_PISA ~ NBMC + WS + S + HW + AAE</code></li>
</ul>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>best_multioutput &lt;-<span class="st"> </span><span class="kw">EAT</span>(<span class="dt">data =</span> PISAindex, </span>
<span id="cb19-2"><a href="#cb19-2"></a>                        <span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">12</span>, <span class="dv">17</span>), <span class="co"># input</span></span>
<span id="cb19-3"><a href="#cb19-3"></a>                        <span class="dt">y =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">5</span>, <span class="co"># output</span></span>
<span id="cb19-4"><a href="#cb19-4"></a>                        <span class="dt">numStop =</span> <span class="dv">8</span>,</span>
<span id="cb19-5"><a href="#cb19-5"></a>                        <span class="dt">fold =</span> <span class="dv">6</span>)</span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="kw">plotEAT</span>(<span class="dt">object =</span> best_multioutput)</span></code></pre></div>
<ul>
<li>Example 4: <code>S_PISA ~ NBMC + S + HW + I + GDP_PPP</code></li>
</ul>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>best_multioutput2 &lt;-<span class="st"> </span><span class="kw">EAT</span>(<span class="dt">data =</span> PISAindex, </span>
<span id="cb21-2"><a href="#cb21-2"></a>                        <span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">12</span>, <span class="dv">16</span>, <span class="dv">18</span>), <span class="co"># input</span></span>
<span id="cb21-3"><a href="#cb21-3"></a>                        <span class="dt">y =</span> <span class="dv">3</span>) <span class="co"># output</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="kw">plotEAT</span>(<span class="dt">object =</span> best_multioutput2)</span></code></pre></div>
</div>
</div>
<div id="eat-tuning" class="section level2">
<h2>EAT tuning</h2>
<p>In this section, <code>PISAindex</code> is divided into a training subset with 70% of the DMUs and a test set with the other 30% of the DMUs. Next, the <code>bestEAT</code> function will be applied to find the value of the hyperparameters <code>numStop</code> and <code>fold</code> that minimize the mean square error calculated on the test sample from a Efficiency Analysis Tree trained with the training sample.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>n &lt;-<span class="st"> </span><span class="kw">nrow</span>(PISAindex) <span class="co"># Observations in the dataset</span></span>
<span id="cb23-2"><a href="#cb23-2"></a>t_index &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span>n, n <span class="op">*</span><span class="st"> </span><span class="fl">0.7</span>) <span class="co"># Training indexes</span></span>
<span id="cb23-3"><a href="#cb23-3"></a>training &lt;-<span class="st"> </span>PISAindex[t_index, ] <span class="co"># Training set</span></span>
<span id="cb23-4"><a href="#cb23-4"></a>test &lt;-<span class="st"> </span>PISAindex[<span class="op">-</span>t_index, ] <span class="co"># Test set</span></span></code></pre></div>
<div id="besteat" class="section level3">
<h3>bestEAT()</h3>
<p>The <code>bestEAT</code> function requires a training set (<code>training</code>) on which to model an Efficiency Analysis Tree and a test set (<code>test</code>) on which to calculate the mean square error. The number of trees built is given by the number of different combinations that can be given by the <code>numStop</code> and <code>fold</code> arguments. <code>bestEAT()</code> returns a data frame with the following columns:</p>
<ul>
<li><code>numStop</code> : numStop hyperparameter value.</li>
<li><code>fold</code> : fold hyperparameter value.</li>
<li><code>MSE</code>: mean square error calculated on the test sample with the tree built with the training sample, numStop and fold values.</li>
<li><code>leaf</code>: number of leaf nodes of the tree.</li>
</ul>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="kw">bestEAT</span>(training, test,</span>
<span id="cb24-2"><a href="#cb24-2"></a>        x, y,</span>
<span id="cb24-3"><a href="#cb24-3"></a>        numStop,</span>
<span id="cb24-4"><a href="#cb24-4"></a>        fold,</span>
<span id="cb24-5"><a href="#cb24-5"></a>        na.rm)</span></code></pre></div>
<p>Tuning for:</p>
<p><code>S_PISA + R_PISA + M_PISA ~ NBMC + WS + S + PS + ABK + AIC + HW + EQ + PR + PFC + I + AAE + GDP_PPP</code></p>
<p><code>numStop = {3, 5, 7, 10}</code> and <code>fold = {5, 7}</code></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="kw">bestEAT</span>(<span class="dt">training =</span> training, </span>
<span id="cb25-2"><a href="#cb25-2"></a>        <span class="dt">test =</span> test,</span>
<span id="cb25-3"><a href="#cb25-3"></a>        <span class="dt">x =</span> <span class="dv">6</span><span class="op">:</span><span class="dv">18</span>,</span>
<span id="cb25-4"><a href="#cb25-4"></a>        <span class="dt">y =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">5</span>,</span>
<span id="cb25-5"><a href="#cb25-5"></a>        <span class="dt">numStop =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">10</span>),</span>
<span id="cb25-6"><a href="#cb25-6"></a>        <span class="dt">fold =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">7</span>))</span></code></pre></div>
<p>Tuning for:</p>
<p><code>S_PISA + R_PISA + M_PISA ~ NBMC + WS + S + HW + AAE</code>.</p>
<p><code>numStop = {3, 5, 7, 10}</code> and <code>fold = {5, 7}</code></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="kw">bestEAT</span>(<span class="dt">training =</span> training, </span>
<span id="cb26-2"><a href="#cb26-2"></a>        <span class="dt">test =</span> test,</span>
<span id="cb26-3"><a href="#cb26-3"></a>        <span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">12</span>, <span class="dv">17</span>),</span>
<span id="cb26-4"><a href="#cb26-4"></a>        <span class="dt">y =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">5</span>,</span>
<span id="cb26-5"><a href="#cb26-5"></a>        <span class="dt">numStop =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">10</span>),</span>
<span id="cb26-6"><a href="#cb26-6"></a>        <span class="dt">fold =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">7</span>))</span></code></pre></div>
<p>The best tree is given by the hyperparameters <code>{numStop = 3, fold = 5}</code> in the reduced model with <code>MSE = 65.36</code> and 12 leaf nodes.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>bestmodel &lt;-<span class="st"> </span><span class="kw">EAT</span>(<span class="dt">data =</span> PISAindex,</span>
<span id="cb27-2"><a href="#cb27-2"></a>                 <span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">12</span>, <span class="dv">17</span>),</span>
<span id="cb27-3"><a href="#cb27-3"></a>                 <span class="dt">y =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">5</span>,</span>
<span id="cb27-4"><a href="#cb27-4"></a>                 <span class="dt">numStop =</span> <span class="dv">3</span>,</span>
<span id="cb27-5"><a href="#cb27-5"></a>                 <span class="dt">fold =</span> <span class="dv">5</span>)</span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="kw">summary</span>(bestmodel)</span></code></pre></div>
</div>
</div>
<div id="efficiency-scores.-graphical-representation." class="section level2">
<h2>Efficiency scores. Graphical representation.</h2>
<div id="non-convex-model-efficiencyeat" class="section level3">
<h3>Non-convex model: efficiencyEAT()</h3>
<p>The efficiency scores are numerical values that indicate the degree of efficiency of a set of DMUs. It must be entered a dataset (<code>data</code>) and the corresponding indexes of input(s) (<code>x</code>) and output(s) (<code>y</code>). It is recommended that the dataset with the DMUs whose efficiency is to be calculated coincide with those used to estimate the frontier. However, it is also possible to calculate the efficiency scores for a new dataset. The efficiency scores are calculated using the mathematical programming model included in the argument <code>score_model</code>. The following models are available:</p>
<ul>
<li><code>BCC_out</code>: Banker Charnes and Cooper output-oriented radial model with efficiency level at 1.</li>
<li><code>BCC_in</code>: Banker Charnes and Cooper input-oriented radial model with efficiency level at 1.</li>
<li><code>DDF</code>: Directional Distance Function with efficiency level at 0.</li>
<li><code>RSL_out</code>: output-oriented Rusell Model with efficiency level at 1.</li>
<li><code>RSL_in</code>: input-oriented Rusell Model with efficiency level at 1.</li>
<li><code>WAM</code>: Weighted Additive Model with efficiency level at 0.</li>
</ul>
<p>If <code>FDH = TRUE</code> scores are also calculated through a FDH model.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="kw">efficiencyEAT</span>(data, x, y, </span>
<span id="cb29-2"><a href="#cb29-2"></a>              object,</span>
<span id="cb29-3"><a href="#cb29-3"></a>              score_model,</span>
<span id="cb29-4"><a href="#cb29-4"></a>              <span class="dt">r =</span> <span class="dv">2</span>,</span>
<span id="cb29-5"><a href="#cb29-5"></a>              <span class="dt">FDH =</span> <span class="ot">TRUE</span>,</span>
<span id="cb29-6"><a href="#cb29-6"></a>              <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>For this section, the <code>single_model</code> created in the first section is used.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>scores_EAT &lt;-<span class="st"> </span><span class="kw">efficiencyEAT</span>(<span class="dt">data =</span> PISAindex,</span>
<span id="cb30-2"><a href="#cb30-2"></a>                            <span class="dt">x =</span> <span class="dv">15</span>, </span>
<span id="cb30-3"><a href="#cb30-3"></a>                            <span class="dt">y =</span> <span class="dv">3</span>,</span>
<span id="cb30-4"><a href="#cb30-4"></a>                            <span class="dt">object =</span> single_model, </span>
<span id="cb30-5"><a href="#cb30-5"></a>                            <span class="dt">scores_model =</span> <span class="st">&quot;BCC_out&quot;</span>,</span>
<span id="cb30-6"><a href="#cb30-6"></a>                            <span class="dt">r =</span> <span class="dv">3</span>,</span>
<span id="cb30-7"><a href="#cb30-7"></a>                            <span class="dt">FDH =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>scores_EAT2 &lt;-<span class="st"> </span><span class="kw">efficiencyEAT</span>(<span class="dt">data =</span> PISAindex,</span>
<span id="cb31-2"><a href="#cb31-2"></a>                            <span class="dt">x =</span> <span class="dv">15</span>, </span>
<span id="cb31-3"><a href="#cb31-3"></a>                            <span class="dt">y =</span> <span class="dv">3</span>,</span>
<span id="cb31-4"><a href="#cb31-4"></a>                            <span class="dt">object =</span> single_model, </span>
<span id="cb31-5"><a href="#cb31-5"></a>                            <span class="dt">scores_model =</span> <span class="st">&quot;BCC_in&quot;</span>,</span>
<span id="cb31-6"><a href="#cb31-6"></a>                            <span class="dt">r =</span> <span class="dv">3</span>)</span></code></pre></div>
</div>
<div id="convex-model-efficiencyceat" class="section level3">
<h3>Convex model: efficiencyCEAT()</h3>
<p><code>efficiencyCEAT()</code> returns the efficiency scores for the convexified frontier obtained through Efficiency Analysis Trees. In this case, If <code>DEA = TRUE</code> scores are also calculated through a DEA model.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="kw">efficiencyCEAT</span>(data, x, y, </span>
<span id="cb32-2"><a href="#cb32-2"></a>               object,</span>
<span id="cb32-3"><a href="#cb32-3"></a>               score_model,</span>
<span id="cb32-4"><a href="#cb32-4"></a>               <span class="dt">r =</span> <span class="dv">3</span>,</span>
<span id="cb32-5"><a href="#cb32-5"></a>               <span class="dt">DEA =</span> <span class="ot">TRUE</span>,</span>
<span id="cb32-6"><a href="#cb32-6"></a>               <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="kw">efficiencyCEAT</span>(<span class="dt">data =</span> PISAindex,</span>
<span id="cb33-2"><a href="#cb33-2"></a>               <span class="dt">x =</span> <span class="dv">15</span>, </span>
<span id="cb33-3"><a href="#cb33-3"></a>               <span class="dt">y =</span> <span class="dv">3</span>,</span>
<span id="cb33-4"><a href="#cb33-4"></a>               <span class="dt">object =</span> single_model, </span>
<span id="cb33-5"><a href="#cb33-5"></a>               <span class="dt">scores_model =</span> <span class="st">&quot;BCC_out&quot;</span>,</span>
<span id="cb33-6"><a href="#cb33-6"></a>               <span class="dt">r =</span> <span class="dv">3</span>,</span>
<span id="cb33-7"><a href="#cb33-7"></a>               <span class="dt">DEA =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
</div>
<div id="efficiencyjitter" class="section level3">
<h3>efficiencyJitter()</h3>
<p><code>efficiencyJitter</code> returns a jitter plot from <code>ggplot2</code>. This graphic shows how DMUs are grouped into leaf nodes in a model built using the <code>EAT</code> function. Each leaf node groups DMUs with the same level of resources. The dot and the black line represent, respectively, the mean value and the standard deviation of the scores of its node. Additionally, efficient DMU labels always are displayed based on the model entered in the <code>score_model</code> argument. Finally, the user can specify an upper bound (<code>upb</code>) and a lower bound (<code>lwb</code>) in order to show, in addition, the labels which efficiency score is between them.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="kw">efficiencyJitter</span>(object, scores_EAT,</span>
<span id="cb34-2"><a href="#cb34-2"></a>                 scores_model,</span>
<span id="cb34-3"><a href="#cb34-3"></a>                 <span class="dt">lwb =</span> <span class="ot">NULL</span>, <span class="dt">upb =</span> <span class="ot">NULL</span>)</span></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="kw">efficiencyJitter</span>(<span class="dt">object =</span> single_model,</span>
<span id="cb35-2"><a href="#cb35-2"></a>                 <span class="dt">scores_EAT =</span> scores_EAT<span class="op">$</span>EAT_BCC_out,</span>
<span id="cb35-3"><a href="#cb35-3"></a>                 <span class="dt">scores_model =</span> <span class="st">&quot;BCC_out&quot;</span>,</span>
<span id="cb35-4"><a href="#cb35-4"></a>                 <span class="dt">lwb =</span> <span class="fl">1.2</span>)</span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="kw">efficiencyJitter</span>(<span class="dt">object =</span> single_model,</span>
<span id="cb36-2"><a href="#cb36-2"></a>                 <span class="dt">scores_EAT =</span> scores_EAT2<span class="op">$</span>EAT_BCC_in,</span>
<span id="cb36-3"><a href="#cb36-3"></a>                 <span class="dt">scores_model =</span> <span class="st">&quot;BCC_in&quot;</span>,</span>
<span id="cb36-4"><a href="#cb36-4"></a>                 <span class="dt">upb =</span> <span class="fl">0.65</span>)</span></code></pre></div>
<p>Graphically, it is observed that if the BCC models are used to obtain the efficiency scores:</p>
<ul>
<li><p>Under output orientation, those DMUs that are arranged in the horizontal plane of the frontier are efficient.</p></li>
<li><p>Under input orientation those DMUs that are arranged in the vertical plane of the frontier are efficient.</p></li>
<li><p>If a DMU is located in a corner of the frontier, it is efficient under both orientations.</p></li>
</ul>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="kw">plot</span>(frontier)</span></code></pre></div>
</div>
<div id="efficiencydensity" class="section level3">
<h3>efficiencyDensity()</h3>
<p><code>efficiencyDensity()</code> returns a density plot from <code>ggplot2</code>. In this way, the similarity between the scores obtained by the different available methodologies can be verified.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="kw">efficiencyDensity</span>(scores_EAT,</span>
<span id="cb38-2"><a href="#cb38-2"></a>                  <span class="dt">scores_FDH =</span> <span class="ot">NULL</span>,</span>
<span id="cb38-3"><a href="#cb38-3"></a>                  <span class="dt">scores_RFEAT =</span> <span class="ot">NULL</span>)</span></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a><span class="kw">efficiencyDensity</span>(<span class="dt">scores_EAT =</span> scores_EAT<span class="op">$</span>EAT_BCC_out,</span>
<span id="cb39-2"><a href="#cb39-2"></a>                  <span class="dt">scores_FDH =</span> scores_EAT<span class="op">$</span>FDH_BCC_out,</span>
<span id="cb39-3"><a href="#cb39-3"></a>                  <span class="dt">scores_RFEAT =</span> <span class="ot">NULL</span>)</span></code></pre></div>
<ul>
<li>The curse of dimensionality</li>
</ul>
<p>When the ratio of the sample size and the number of variables (inputs and outputs) is low, the standard methods of efficiency analysis (specially FDH) tend to evaluate a large number of DMUs as technically efficient. This problem is known as âcurse of dimensionalityâ. To show it, the efficiency scores of the <code>multioutput_model</code> (section 2) with 16 variables and 71 DMUs are calculated:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a>cursed_scores &lt;-<span class="st"> </span><span class="kw">efficiencyEAT</span>(<span class="dt">data =</span> PISAindex,</span>
<span id="cb40-2"><a href="#cb40-2"></a>                               <span class="dt">x =</span> <span class="dv">6</span><span class="op">:</span><span class="dv">18</span>, </span>
<span id="cb40-3"><a href="#cb40-3"></a>                               <span class="dt">y =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">5</span>,</span>
<span id="cb40-4"><a href="#cb40-4"></a>                               <span class="dt">object =</span> multioutput_model, </span>
<span id="cb40-5"><a href="#cb40-5"></a>                               <span class="dt">scores_model =</span> <span class="st">&quot;BCC_out&quot;</span>,</span>
<span id="cb40-6"><a href="#cb40-6"></a>                               <span class="dt">r =</span> <span class="dv">3</span>,</span>
<span id="cb40-7"><a href="#cb40-7"></a>                               <span class="dt">FDH =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a><span class="kw">efficiencyDensity</span>(<span class="dt">scores_EAT =</span> cursed_scores<span class="op">$</span>EAT_BCC_out,</span>
<span id="cb41-2"><a href="#cb41-2"></a>                  <span class="dt">scores_FDH =</span> cursed_scores<span class="op">$</span>FDH_BCC_out)</span></code></pre></div>
</div>
</div>
<div id="random-forest" class="section level2">
<h2>Random Forest</h2>
<div id="rfeat" class="section level3">
<h3>RFEAT()</h3>
<p>Random Forest + Efficiency Analysis Trees (<code>RFEAT</code>) has also been developed with the aim of providing a greater stability to the results obtained by the <code>EAT</code> function. <code>RFEAT</code> function requires the <code>data</code> containing the variables for the analysis, <code>x</code> and <code>y</code> corresponding to the inputs and outputs indexes respectively, the minimun number of observation in a node for a split to be attempted (<code>numStop</code>) and <code>na.rm</code> to ignore observations with <code>NA</code> cells. All these arguments are used for the construction of the <code>m</code> individual Efficiency Analysis Trees that make up the random forest. Finally, the argument <code>s_mtry</code> indicates the number of inputs that can be randomly selected in each split. It can be set as any integer although there are also certain predefined values. Being, <span class="math inline">\(n_{x}\)</span> the number of inputs, <span class="math inline">\(n_{y}\)</span> the number of outputs and <span class="math inline">\(n(t)\)</span> the number of observations in a node, the available options in <code>s_mtry</code> are:</p>
<ul>
<li><code>Breiman</code> = <span class="math inline">\(\frac{n_{x}}{3}\)</span></li>
<li><code>DEA1</code> = <span class="math inline">\(\frac{n(t)}{2} - n_{y}\)</span></li>
<li><code>DEA2</code> = <span class="math inline">\(\frac{n(t)}{3} - n_{y}\)</span></li>
<li><code>DEA3</code> = <span class="math inline">\(n(t) - 2 \cdot n_{y}\)</span></li>
<li><code>DEA4</code> = <span class="math inline">\(min(\frac{n(t)}{n_{y}}, \frac{n(t)}{3} - n_{y})\)</span></li>
</ul>
<p>The function returns an <code>RFEAT</code> object.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="kw">RFEAT</span>(data, x, y,</span>
<span id="cb42-2"><a href="#cb42-2"></a>      <span class="dt">numStop =</span> <span class="dv">5</span>, <span class="dt">m =</span> <span class="dv">50</span>,</span>
<span id="cb42-3"><a href="#cb42-3"></a>      <span class="dt">s_mtry =</span> <span class="st">&quot;Breiman&quot;</span>,</span>
<span id="cb42-4"><a href="#cb42-4"></a>      <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a>forest &lt;-<span class="st"> </span><span class="kw">RFEAT</span>(<span class="dt">data =</span> PISAindex, </span>
<span id="cb43-2"><a href="#cb43-2"></a>                <span class="dt">x =</span> <span class="dv">6</span><span class="op">:</span><span class="dv">18</span>, <span class="co"># input </span></span>
<span id="cb43-3"><a href="#cb43-3"></a>                <span class="dt">y =</span> <span class="dv">5</span>, <span class="co"># output</span></span>
<span id="cb43-4"><a href="#cb43-4"></a>                <span class="dt">numStop =</span> <span class="dv">3</span>, </span>
<span id="cb43-5"><a href="#cb43-5"></a>                <span class="dt">m =</span> <span class="dv">50</span>,</span>
<span id="cb43-6"><a href="#cb43-6"></a>                <span class="dt">s_mtry =</span> <span class="st">&quot;Breiman&quot;</span>,</span>
<span id="cb43-7"><a href="#cb43-7"></a>                <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a><span class="kw">print</span>(forest)</span></code></pre></div>
</div>
</div>
<div id="rankingrfeat" class="section level2">
<h2>rankingRFEAT()</h2>
<p>As in <code>rankingEAT()</code>, the <code>rankingRFEAT</code> function allows to calculate an importance score for variables using an <code>RFEAT</code> object.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a><span class="kw">rankingRFEAT</span>(object, <span class="dt">r =</span> <span class="dv">2</span>,</span>
<span id="cb45-2"><a href="#cb45-2"></a>              <span class="dt">barplot =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="kw">rankingRFEAT</span>(<span class="dt">object =</span> forest, <span class="dt">r =</span> <span class="dv">2</span>,</span>
<span id="cb46-2"><a href="#cb46-2"></a>             <span class="dt">barplot =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<ul>
<li>A positive importance score means that including the input in the model improves the performance.</li>
<li>A negative imporance score means that removing the input from the model imrpoves the performance.</li>
</ul>
<p>Note the peculiarity of the results shown where all importance scores are negative.</p>
</div>
<div id="bestrfeat" class="section level2">
<h2>bestRFEAT()</h2>
<p>As in <code>bestEAT()</code>, the <code>bestRFEAT</code> function is applied to find the optimal hyperparameters that minimize the mean square error calculated on the test sample. In this case, the available hyperparameters are <code>numStop</code>, <code>m</code> and <code>s_mtry</code>. Note that <code>s_mtry</code> is a character vector even if integer values are introduced.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="kw">bestRFEAT</span>(training, test,</span>
<span id="cb47-2"><a href="#cb47-2"></a>          x, y,</span>
<span id="cb47-3"><a href="#cb47-3"></a>          numStop,</span>
<span id="cb47-4"><a href="#cb47-4"></a>          m,</span>
<span id="cb47-5"><a href="#cb47-5"></a>          s_mtry,</span>
<span id="cb47-6"><a href="#cb47-6"></a>          <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a><span class="kw">bestRFEAT</span>(<span class="dt">training =</span> training, </span>
<span id="cb48-2"><a href="#cb48-2"></a>        <span class="dt">test =</span> test,</span>
<span id="cb48-3"><a href="#cb48-3"></a>        <span class="dt">x =</span> <span class="dv">6</span><span class="op">:</span><span class="dv">18</span>,</span>
<span id="cb48-4"><a href="#cb48-4"></a>        <span class="dt">y =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">5</span>,</span>
<span id="cb48-5"><a href="#cb48-5"></a>        <span class="dt">numStop =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">10</span>),</span>
<span id="cb48-6"><a href="#cb48-6"></a>        <span class="dt">m =</span> <span class="kw">c</span>(<span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>),</span>
<span id="cb48-7"><a href="#cb48-7"></a>        <span class="dt">s_mtry =</span> <span class="kw">c</span>(<span class="st">&quot;Breiman&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;5&quot;</span>))</span></code></pre></div>
<p>The best forest is given by the hyperparameters <code>{numStop = 5, m = 50, s_mtry = &quot;Breiman&quot;}</code> with <code>MSE = 47.66</code>.</p>
</div>
<div id="efficiencyrfeat" class="section level2">
<h2>efficiencyRFEAT()</h2>
<p>As in <code>efficiencyEAT()</code>, the <code>efficiencyRFEAT</code> function returns the efficiency scores for a set of DMUs. However, in this case it is only available for the BCC model with output orientation. Again, the FDH scores can be requested using <code>FDH = TRUE</code>.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a><span class="kw">efficiencyRFEAT</span>(data, x, y,</span>
<span id="cb49-2"><a href="#cb49-2"></a>                object,</span>
<span id="cb49-3"><a href="#cb49-3"></a>                <span class="dt">r =</span> <span class="dv">2</span>,</span>
<span id="cb49-4"><a href="#cb49-4"></a>                <span class="dt">FDH =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a>scoresRF &lt;-<span class="st"> </span><span class="kw">efficiencyRFEAT</span>(<span class="dt">data =</span> PISAindex,</span>
<span id="cb50-2"><a href="#cb50-2"></a>                            <span class="dt">x =</span> <span class="dv">6</span><span class="op">:</span><span class="dv">18</span>, <span class="co"># input</span></span>
<span id="cb50-3"><a href="#cb50-3"></a>                            <span class="dt">y =</span> <span class="dv">5</span>, <span class="co"># output</span></span>
<span id="cb50-4"><a href="#cb50-4"></a>                            <span class="dt">object =</span> forest,</span>
<span id="cb50-5"><a href="#cb50-5"></a>                            <span class="dt">FDH =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
</div>
<div id="predictions" class="section level2">
<h2>Predictions</h2>
<p><code>predictEAT()</code> and <code>predictRFEAT()</code> return a data frame with the data and the expected output for a set of observations using Efficiency Analysis Trees and Random Forest + Efficiency Analysis Trees techniques respectively. In both cases, <code>newdata</code> refers to a data frame with the input variables. Regarding the <code>object</code> argument, in the first case it corresponds to an <code>EAT</code> object and in the second case to an <code>RFEAT</code> object.</p>
<p>In predictions using an <code>EAT</code> object, only one Efficiency Analysis Tree is used. However, for the <code>RFEAT</code> model, the output is predicted by each of the <code>m</code> individual trees trained and subsequently the mean value of all predictions is obtained.</p>
<div id="predicteat" class="section level3">
<h3>predictEAT()</h3>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a><span class="kw">predictEAT</span>(object, newdata)</span></code></pre></div>
</div>
<div id="predictrfeat" class="section level3">
<h3>predictRFEAT()</h3>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a><span class="kw">predictRFEAT</span>(object, newdata)</span></code></pre></div>
</div>
<div id="predictfdh" class="section level3">
<h3>predictFDH()</h3>
<p><code>predictFDH()</code> returns a data frame with the data and the expected output for a set of observations using the Free Disposal Hull mathematical programming model. In this case, it is necessary to enter the data set (<code>data</code>) with the study variables, the indexes of the inputs (<code>x</code>) and the indixes of the outputs (<code>y</code>).</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a><span class="kw">predictFDH</span>(data, x, y)</span></code></pre></div>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a>input &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">12</span>, <span class="dv">17</span>)</span>
<span id="cb54-2"><a href="#cb54-2"></a>output &lt;-<span class="st"> </span><span class="dv">3</span><span class="op">:</span><span class="dv">5</span></span>
<span id="cb54-3"><a href="#cb54-3"></a></span>
<span id="cb54-4"><a href="#cb54-4"></a><span class="kw">which</span>(<span class="kw">is.na</span>(PISAindex), <span class="dt">arr.ind =</span> <span class="ot">TRUE</span>)</span>
<span id="cb54-5"><a href="#cb54-5"></a></span>
<span id="cb54-6"><a href="#cb54-6"></a><span class="co"># FDH does not accept NA rows, so we exclude ESP</span></span>
<span id="cb54-7"><a href="#cb54-7"></a></span>
<span id="cb54-8"><a href="#cb54-8"></a>EAT_model &lt;-<span class="st"> </span><span class="kw">EAT</span>(<span class="dt">data =</span> PISAindex[<span class="op">-</span><span class="st"> </span><span class="dv">32</span>, ],</span>
<span id="cb54-9"><a href="#cb54-9"></a>                 <span class="dt">x =</span> input,</span>
<span id="cb54-10"><a href="#cb54-10"></a>                 <span class="dt">y =</span> output)</span>
<span id="cb54-11"><a href="#cb54-11"></a></span>
<span id="cb54-12"><a href="#cb54-12"></a>RFEAT_model &lt;-<span class="st"> </span><span class="kw">RFEAT</span>(<span class="dt">data =</span> PISAindex[<span class="op">-</span><span class="st"> </span><span class="dv">32</span>, ],</span>
<span id="cb54-13"><a href="#cb54-13"></a>                     <span class="dt">x =</span> input,</span>
<span id="cb54-14"><a href="#cb54-14"></a>                     <span class="dt">y =</span> output)</span></code></pre></div>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a>predictions_EAT &lt;-<span class="st"> </span><span class="kw">predictEAT</span>(<span class="dt">object =</span> EAT_model,</span>
<span id="cb55-2"><a href="#cb55-2"></a>                              <span class="dt">newdata =</span> PISAindex[<span class="op">-</span><span class="st"> </span><span class="dv">32</span>, input])</span>
<span id="cb55-3"><a href="#cb55-3"></a></span>
<span id="cb55-4"><a href="#cb55-4"></a>predictions_RFEAT &lt;-<span class="st"> </span><span class="kw">predictRFEAT</span>(<span class="dt">object =</span> RFEAT_model,</span>
<span id="cb55-5"><a href="#cb55-5"></a>                                  <span class="dt">newdata =</span> PISAindex[<span class="op">-</span><span class="st"> </span><span class="dv">32</span>, input])</span>
<span id="cb55-6"><a href="#cb55-6"></a></span>
<span id="cb55-7"><a href="#cb55-7"></a>predictions_FDH &lt;-<span class="st"> </span><span class="kw">predictFDH</span>(<span class="dt">data =</span> PISAindex[<span class="op">-</span><span class="st"> </span><span class="dv">32</span>, ],</span>
<span id="cb55-8"><a href="#cb55-8"></a>                              <span class="dt">x =</span> input,</span>
<span id="cb55-9"><a href="#cb55-9"></a>                              <span class="dt">y =</span> output)</span></code></pre></div>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a><span class="kw">names</span>(predictions_EAT)[<span class="dv">6</span><span class="op">:</span><span class="dv">8</span>] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;S_EAT&quot;</span>, <span class="st">&quot;R_EAT&quot;</span>, <span class="st">&quot;M_EAT&quot;</span>)</span>
<span id="cb56-2"><a href="#cb56-2"></a><span class="kw">names</span>(predictions_RFEAT)[<span class="dv">6</span><span class="op">:</span><span class="dv">8</span>] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;S_RFEAT&quot;</span>, <span class="st">&quot;R_RFEAT&quot;</span>, <span class="st">&quot;M_RFEAT&quot;</span>)</span>
<span id="cb56-3"><a href="#cb56-3"></a><span class="kw">names</span>(predictions_FDH)[<span class="dv">6</span><span class="op">:</span><span class="dv">8</span>] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;S_FDH&quot;</span>, <span class="st">&quot;R_FDH&quot;</span>, <span class="st">&quot;M_FDH&quot;</span>)</span>
<span id="cb56-4"><a href="#cb56-4"></a></span>
<span id="cb56-5"><a href="#cb56-5"></a>predictionsEAT &lt;-<span class="st"> </span><span class="kw">cbind</span>(PISAindex[<span class="op">-</span><span class="st"> </span><span class="dv">32</span>, <span class="dv">3</span>], predictions_EAT[, <span class="dv">6</span>],</span>
<span id="cb56-6"><a href="#cb56-6"></a>                        PISAindex[<span class="op">-</span><span class="st"> </span><span class="dv">32</span>, <span class="dv">4</span>], predictions_EAT[, <span class="dv">7</span>],</span>
<span id="cb56-7"><a href="#cb56-7"></a>                        PISAindex[<span class="op">-</span><span class="st"> </span><span class="dv">32</span>, <span class="dv">5</span>], predictions_EAT[, <span class="dv">8</span>])</span>
<span id="cb56-8"><a href="#cb56-8"></a></span>
<span id="cb56-9"><a href="#cb56-9"></a>predictionsRFEAT &lt;-<span class="st"> </span><span class="kw">cbind</span>(PISAindex[<span class="op">-</span><span class="st"> </span><span class="dv">32</span>, <span class="dv">3</span>], predictionsRFEAT[, <span class="dv">6</span>],</span>
<span id="cb56-10"><a href="#cb56-10"></a>                          PISAindex[<span class="op">-</span><span class="st"> </span><span class="dv">32</span>, <span class="dv">4</span>], predictionsRFEAT[, <span class="dv">7</span>],</span>
<span id="cb56-11"><a href="#cb56-11"></a>                          PISAindex[<span class="op">-</span><span class="st"> </span><span class="dv">32</span>, <span class="dv">5</span>], predictionsRFEAT[, <span class="dv">8</span>])</span>
<span id="cb56-12"><a href="#cb56-12"></a></span>
<span id="cb56-13"><a href="#cb56-13"></a>predictionsFDH &lt;-<span class="st"> </span><span class="kw">cbind</span>(PISAindex[<span class="op">-</span><span class="st"> </span><span class="dv">32</span>, <span class="dv">3</span>], predictionsFDH[, <span class="dv">6</span>],</span>
<span id="cb56-14"><a href="#cb56-14"></a>                        PISAindex[<span class="op">-</span><span class="st"> </span><span class="dv">32</span>, <span class="dv">4</span>], predictionsFDH[, <span class="dv">7</span>],</span>
<span id="cb56-15"><a href="#cb56-15"></a>                        PISAindex[<span class="op">-</span><span class="st"> </span><span class="dv">32</span>, <span class="dv">5</span>], predictionsFDH[, <span class="dv">8</span>])</span>
<span id="cb56-16"><a href="#cb56-16"></a></span>
<span id="cb56-17"><a href="#cb56-17"></a>kableExtra<span class="op">::</span><span class="kw">kable</span>(predictionsEAT) <span class="op">%&gt;%</span></span>
<span id="cb56-18"><a href="#cb56-18"></a><span class="st">  </span>kableExtra<span class="op">::</span><span class="kw">kable_styling</span>(<span class="st">&quot;striped&quot;</span>, <span class="dt">full_width =</span> F) <span class="op">%&gt;%</span></span>
<span id="cb56-19"><a href="#cb56-19"></a><span class="st">  </span>kableExtra<span class="op">::</span><span class="kw">col_spec</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>), <span class="dt">background =</span> <span class="st">&quot;#DBFFD6&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb56-20"><a href="#cb56-20"></a><span class="st">  </span>kableExtra<span class="op">::</span><span class="kw">row_spec</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>), <span class="dt">background =</span> <span class="st">&quot;#FFFFD1&quot;</span>)</span>
<span id="cb56-21"><a href="#cb56-21"></a></span>
<span id="cb56-22"><a href="#cb56-22"></a>kableExtra<span class="op">::</span><span class="kw">kable</span>(predictionsRFEAT) <span class="op">%&gt;%</span></span>
<span id="cb56-23"><a href="#cb56-23"></a><span class="st">  </span>kableExtra<span class="op">::</span><span class="kw">kable_styling</span>(<span class="st">&quot;striped&quot;</span>, <span class="dt">full_width =</span> F) <span class="op">%&gt;%</span></span>
<span id="cb56-24"><a href="#cb56-24"></a><span class="st">  </span>kableExtra<span class="op">::</span><span class="kw">col_spec</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>), <span class="dt">background =</span> <span class="st">&quot;#DBFFD6&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb56-25"><a href="#cb56-25"></a><span class="st">  </span>kableExtra<span class="op">::</span><span class="kw">row_spec</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>), <span class="dt">background =</span> <span class="st">&quot;#FFFFD1&quot;</span>) </span>
<span id="cb56-26"><a href="#cb56-26"></a></span>
<span id="cb56-27"><a href="#cb56-27"></a>kableExtra<span class="op">::</span><span class="kw">kable</span>(predictionsFDH) <span class="op">%&gt;%</span></span>
<span id="cb56-28"><a href="#cb56-28"></a><span class="st">  </span>kableExtra<span class="op">::</span><span class="kw">kable_styling</span>(<span class="st">&quot;striped&quot;</span>, <span class="dt">full_width =</span> F) <span class="op">%&gt;%</span></span>
<span id="cb56-29"><a href="#cb56-29"></a><span class="st">  </span>kableExtra<span class="op">::</span><span class="kw">col_spec</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>), <span class="dt">background =</span> <span class="st">&quot;#DBFFD6&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb56-30"><a href="#cb56-30"></a><span class="st">  </span>kableExtra<span class="op">::</span><span class="kw">row_spec</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>), <span class="dt">background =</span> <span class="st">&quot;#FFFFD1&quot;</span>) </span></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
